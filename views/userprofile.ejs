<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile</title>
    <link rel="stylesheet" href="/css/style.css">
    <script src="/script/userprofile.js" defer></script>
</head>
<body>
    <main>
        <div class="dashboard-box">
            <aside class="sidebar">
                <div class="logo">
                    <img src="/public/images/logo.png" alt="Logo">
                    <h4>CMASTER</h4>
                </div>
                <nav>
                    <ul>
                        <li><a href="/userdashboard">Dashboard</a></li>
                        <li><a href="/profile">Profile</a></li>
                        <li><a href="#">Settings</a></li>
                        <li><a href="/logout">Logout</a></li>
                    </ul>
                </nav>
            </aside>
            <section class="main-content">
                <header>
                    <h2>Welcome, <%= userName %>!</h2>
                </header>
                <div class="content">
                    <h3>User Profile Details</h3>
                    <ul>
                        <li><strong>Name:</strong> <%= user.name %></li>
                        <li><strong>Email:</strong> <%= user.email %></li>
                    </ul>

                    <div id="addressSection">
                        <% if (address) { %>
                            <h3>User Address</h3>
                            <ul>
                                <li><strong>Street Address:</strong> <span id="existing-street"><%= address.street_address %></span></li>
                                <li><strong>City:</strong> <span id="existing-city"><%= address.city %></span></li>
                                <li><strong>State:</strong> <span id="existing-state"><%= address.state %></span></li>
                                <li><strong>Zip Code:</strong> <span id="existing-zip"><%= address.zip_code %></span></li>
                                <li><strong>Country:</strong> <span id="existing-country"><%= address.country %></span></li>
                            </ul>
                            <button id="toggleAddressForm" onclick="toggleEditForm(<%= address.address_id %>)">Edit Address</button>
                        <% } else { %>
                            <button id="toggleAddressForm" onclick="toggleAddressForm()">Add Address</button>
                        <% } %>
                    </div>
                    
                    <form id="addressForm" action="/addaddress" method="POST" style="display: none;">
                        <div>
                            <label for="street_address">Street Address</label>
                            <input type="text" id="street_address" name="street_address" required>
                        </div>
                        <div>
                            <label for="city">City</label>
                            <input type="text" id="city" name="city" required>
                        </div>
                        <div>
                            <label for="state">State</label>
                            <select id="state" name="state" required>
                                <option value="">Select State/Province</option>
                                <option value="AB">Alberta</option>
                                <option value="BC">British Columbia</option>
                                <option value="MB">Manitoba</option>
                                <option value="NB">New Brunswick</option>
                                <option value="NL">Newfoundland and Labrador</option>
                                <option value="NS">Nova Scotia</option>
                                <option value="NT">Northwest Territories</option>
                                <option value="NU">Nunavut</option>
                                <option value="ON">Ontario</option>
                                <option value="PE">Prince Edward Island</option>
                                <option value="QC">Quebec</option>
                                <option value="SK">Saskatchewan</option>
                                <option value="YT">Yukon</option>
                            </select>
                        </div>
                        <div>
                            <label for="zip_code">Zip Code</label>
                            <input type="text" id="zip_code" name="zip_code" required>
                        </div>
                        <div>
                            <label for="country">Country</label>
                            <input type="text" id="country" name="country" required>
                        </div>
                        <button type="submit">Add Address</button>
                    </form>
                    
                </div>
            </section>
        </div>
    </main>
</body>
</html>
